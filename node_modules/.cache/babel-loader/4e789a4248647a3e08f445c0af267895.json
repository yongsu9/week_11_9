{"ast":null,"code":"export default function createAsyncThunk(asyncActionCreator, promiseCreator) {\n  return function thunk(...params) {\n    return async dispatch => {\n      const {\n        request,\n        success,\n        failure\n      } = asyncActionCreator;\n      dispatch(request(undefined));\n\n      try {\n        const result = await promiseCreator(...params);\n        dispatch(success(result));\n      } catch (e) {\n        dispatch(failure(e));\n      }\n    };\n  };\n}","map":{"version":3,"sources":["C:/Users/yongs/react-tutorial/week_11_9/src/lib/createAsyncThunk.ts"],"names":["createAsyncThunk","asyncActionCreator","promiseCreator","thunk","params","dispatch","request","success","failure","undefined","result","e"],"mappings":"AAOA,eAAe,SAASA,gBAAT,CAGbC,kBAHa,EAGUC,cAHV,EAG6B;AAExC,SAAO,SAASC,KAAT,CAAe,GAAGC,MAAlB,EAAiC;AACpC,WAAO,MAAOC,QAAP,IAA8B;AACjC,YAAM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,OAAX;AAAoBC,QAAAA;AAApB,UAAgCP,kBAAtC;AACAI,MAAAA,QAAQ,CAACC,OAAO,CAACG,SAAD,CAAR,CAAR;;AACA,UAAI;AACA,cAAMC,MAAM,GAAG,MAAMR,cAAc,CAAC,GAAGE,MAAJ,CAAnC;AACAC,QAAAA,QAAQ,CAACE,OAAO,CAACG,MAAD,CAAR,CAAR;AACH,OAHD,CAGE,OAAOC,CAAP,EAAU;AACRN,QAAAA,QAAQ,CAACG,OAAO,CAACG,CAAD,CAAR,CAAR;AACH;AACJ,KATD;AAUH,GAXD;AAYH","sourcesContent":["import { any } from \"prop-types\";\r\nimport { Dispatch } from \"redux\";\r\nimport { AsyncActionCreatorBuilder } from \"typesafe-actions\";\r\n\r\ntype AnyAsyncActionCreator = AsyncActionCreatorBuilder<any,any,any>;\r\ntype AnyPromiseCreator = (...parmas: any[]) => Promise<any>;\r\n\r\nexport default function createAsyncThunk<\r\n    A extends AnyAsyncActionCreator, \r\n    F extends AnyPromiseCreator\r\n>(asyncActionCreator: A, promiseCreator: F) {\r\n    type Params = Parameters<F>;\r\n    return function thunk(...params: Params){\r\n        return async (dispatch: Dispatch) => {\r\n            const { request, success, failure } = asyncActionCreator;\r\n            dispatch(request(undefined));\r\n            try {\r\n                const result = await promiseCreator(...params);\r\n                dispatch(success(result));\r\n            } catch (e) {\r\n                dispatch(failure(e));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}